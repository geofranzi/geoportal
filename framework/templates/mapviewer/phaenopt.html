<!DOCTYPE html>
<html lang="en" ng-app="webgisApp" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <title>PhaenOPT Portal - Webdienst für das phänologische Klimafolgenmonitoring</title>

    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>

    {% load staticfiles %}
    {% load assets %}
    {% assets "swosVendorCssBundle" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" />
    {% endassets %}

    {% assets "geossVendorCssBundle" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" />
    {% endassets %}

    {# requires fonts and css to be in the same directory, so no inclusion in bundle #}
    <link href="{% static "img/flaticon/font/flaticon.css" %}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{% static "img/flaticon2/flaticon.css" %}">

    {% assets "swosAppCssBundle" %}
    <link href="{{ ASSET_URL }}" rel="stylesheet" />
    {% endassets %}

    {% verbatim %}
    <script type="text/ng-template" id="close">
        <div class="triangle"></div>
        <div class="ns-popover-tooltip" ng-bind="layer.title">
            <button ng-click="hidePopover()">Close</button>
        </div>
    </script>
    {% endverbatim %}

    <script type="text/javascript">
        var mapId = {{id}};
        var subdir = '{{subdir}}';
    </script>


    <script type="text/javascript">
        var _paq = _paq || [];
        // add individual tracking code
    </script>

    <style type="text/css">
        #geoss-search-widget .rating-icon, #geoss-search-widget .rating {
            display:none;
        }
    </style>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
    <script>
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#3c404d",
          "text": "#d6d6d6"
        },
        "button": {
          "background": "#8bed4f"
        }
      },
      "position": "bottom-left",
      "content": {
        "href": "http://www.jena-optronik.de/en/imprint-data-privacy.html"
      }
    })});
    </script>
</head>
<body>
    <div ng-controller="StoryLineCtrl"></div>
    <div id="loading-div">
        <div class="loading">
            <i class="fa fa-circle-o-notch fa-spin"></i>
            <button class="btn btn-default btn-primary btn-sm" onclick="$('#loading-div').hide()" style="margin-left: -18px;margin-top: -65px;">... loading...</button>
        </div>
    </div>

    {% verbatim %}
    <div id="alerts" ng-controller="AlertCtrl as ac">
        <div uib-alert ng-repeat="alert in ac.alerts" class="alert alert-{{alert.type}}" close="ac.closeAlert()">{{alert.msg}}</div>
    </div>
    {% endverbatim %}

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <!--<div class="navbar-brand" id="title-left" style="padding-top: 4px;padding-left: 4px;"><a href="1.html"><img src="/static/tlug-logo_4c.png" style="height: 50px;margin-top: 5px;"></a></div>-->
				<div class="navbar-brand" id="title-left" style="padding-top: 4px;padding-left: 12px;width:230px;"><a href="1.html"><img src="/media/phaenopt-logo4.png" style="height: 55px;margin-top: 2px;"></a></div>
            </div>

            <!-- TOOLBAR in Navigation fuer Tablet und Desktop -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav pull-right col-md-3" id="nav-top-right" ng-controller="LoginCtrl as lc" style="padding-right:0;">
                    <li>
                        <div style="margin-top: 2px;font-size: 0.8em;padding-left: 5px;" class="partners">
                            Bereitgestellt im Rahmen des PhaenOPT-Projekts durch:<br>
                            <a href="http://www.eo.uni-jena.de" target="_blank"><img src="/static/img/UniJena_BildWortMarke_blue.jpg" border="0" height="30"></a>
                            <a href="http://www.tlug-jena.de" target="_blank"><img src="/static/tlug-logo_4c.png" border="0" height="30"></a>
                            <a href="http://www.jena-optronik.de" target="_blank"><img src="/static/jop-logo.png" height="28"></a>
                        </div>
                    </li>
                    <li class="dropdown btn-group pull-right" ng-include="'{% static "includes/auth.html" %}'" id="login-icon" style="display:none"></li>
                </ul>
                <ul class="nav navbar-nav pull-right" id="nav-top-right2">
                    <!--<li class="dropdown btn-group  pull-right" ng-include="'{% static "includes/settings.html" %}'" style="width:50px;"></li>-->
                    <li class="dropdown btn-group  pull-right" ng-include="'{% static "includes/info_swos.html" %}'"></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div>
    </nav>

    {% verbatim %}
    <!-- NAVBAR SEARCH SMARTPHONE - Zweite Version, die auf dem Smartphone in einer separaten Zeile angezeigt wird.-->
    <nav class="navbar visible-xs" role="navigation" id="navbar-search" ng-controller="SearchBoxCtrl as sb">
        <div class="container-fluid">
          <!--  <form class="navbar-form navbar-right" ng-submit="sb.search();" role="search" id="xs-search">
                <div class="form-group">
                    <input type="text" class="form-control" ng-model="sb.text" placeholder="Search">
                </div>
            </form>-->
            <button class="btn btn-primary" type="submit"  id="toggle-sidebar">Menu</button>
        </div>
    </nav><!-- END NAVBAR SEARCH SMARTPHONE -->

    <!-- NAVBAR END -->

    <div class="container-fluid" id="center">
        <div class="row" ng-controller="MapCurrentLayersCtrl as mcl">
            <div ng-controller="MapViewerCtrl as mv">
                <div class="map-controls-wrapper">

                    <div id="wetland_sites" class="" style="color: black;font-weight: bold;text-align: center;float: left;margin-top: -4px;">
                        www.phaenopt.info<br>Webdienst für das phänologische Klimafolgenmonitoring
                    </div>

                    <div class="input-group hidden-xs hidden-sm" id="map_search" ng-controller="SearchBoxCtrl as sb">
                        <form ng-submit="sb.search_es();">
                            <input type="text" ng-model="sb.text" class="form-control" placeholder="Search for ..."
                                   id="search_desktop" autocomplete="off" ng-focus="mv.expandSearchBox()">
                            <br style="clear:both"/>
                            <div id="search-extend">
                                <button class="btn btn-primary" type="submit" style="float: right; margin: 4px auto;">
                                    Search
                                </button>
                                <br style="clear:both;"/>
                            </div>

                        </form>
                    </div>

                <!-- /input-group -->
                </div>

                <div class="col-sm-9 col-md-9 col-xs-12 main" map-openlayers id="map">

                    <div id="wetland_attribution">
                        <span ng-repeat="attribution in mv.layer_attribution">
                            | &copy;
                            <span ng-repeat="textpart in attribution">
                                <a ng-if="textpart.url" href="{{ textpart.url }}" target="_blank" style="text-decoration-line: underline; color: #d6d6d6;">{{ textpart.text }}</a>
                                <span ng-if="!textpart.url">{{ textpart.text }}</span>
                            </span>
                        </span>
                    </div>

                    <div id="map_icons">
                        <button type="button" uib-tooltip="Hineinzoomen" tooltip-placement="bottom" tooltip-append-to-body="true" ng-click="mv.zoomIn()" class="btn btn-default btn-circle hidden-xs" id="zoomInButton"><i
                                class="fa-plus fa fa-lg"></i></button>
                        <button type="button" uib-tooltip="Herauszoomen" tooltip-placement="bottom" tooltip-append-to-body="true" ng-click="mv.zoomOut()" class="btn btn-default btn-circle hidden-xs" id="zoomOutButton"><i
                                class="fa-minus fa fa-lg"></i></button>
                        <button type="button" uib-tooltip="Zoom auf Th&uuml;hringen" tooltip-placement="bottom" tooltip-append-to-body="true" ng-click="mv.zoomMaxExtent()" class="btn btn-default btn-circle"><i
                                class="fa-globe fa fa-lg"></i></button>
                        <!--<button type="button" ng-click="mv.createFeature()" class="btn btn-default btn-circle hidden-xs"><i class="fa-pencil-square-o fa fa-lg"></i></button>-->
                        <button type="button" uib-tooltip="Featureinfo abfragen aktivieren (Klick auf Karte)" tooltip-placement="bottom" tooltip-append-to-body="true" ng-click="mv.requestInfo()" ng-class="{'btn-active': mv.data.infoStatus}" ng-disabled="!mv.data.canRequestFeatureInfo" class="btn btn-default btn-circle hidden-xs"><i class="fa-info fa fa-lg"></i></button>
                        <button type="button" uib-tooltip="Show layer attribution" tooltip-placement="bottom" tooltip-append-to-body="true" ng-click="mv.showAttribution()"
                                class="btn btn-default btn-circle attributions-button" ng-disabled="mv.layer_attribution == false || mv.layer_attribution == undefined"><i class="fa-copyright fa fa-lg"></i></button>
                    </div>

                    <div class="remove-button-wrapper hidden-xs" style="display:none">
                        <button class="btn btn-default btn-sm" ng-click="mv.removeAllLayers()">
                            <span class="glyphicon glyphicon-remove"></span>
                            Remove all layers
                        </button>
                    </div>

                    <div id="map_legend"></div>

                    <div id="slider" style="display:none">
                        <div class="input"><input type="text" /></div>
                    </div>
                </div>
            </div>
            <div class="layer-list">
                <div id="current" ng-show="mcl.wetlandListState">
                    <!-- List GROUP -->
                    <div class="list-group" dnd-list="mcl.layersMeta" dnd-drop="mcl.prepareIndex(index, item)">
                        <div class="list-group-item clearfix" ng-repeat="layer in mcl.layersMeta" dnd-draggable="layer"
                             dnd-moved="mcl.changeLayer($index)" dnd-effect-allowed="move" style="border-radius:0;">

                            <div class="catalog-item">
                                <div class="item_left" style="padding-top:12px;">
                                    <button tooltip-append-to-body="true" tooltip-placement="right"
                                            uib-tooltip="Hide layer"
                                            type="button" ng-click="mcl.changeVisibility(layer.id, $event)"
                                            ng-if="mcl.getVisibility(layer.id)" class="btn btn-default"
                                            style="padding: 0;border-color: white;"
                                            aria-label="Left Align"><i
                                            class="fa fa-eye fa-lg"></i></button>
                                    <button tooltip-append-to-body="true" tooltip-placement="right"
                                            uib-tooltip="Show layer"
                                            type="button" ng-click="mcl.changeVisibility(layer.id, $event)"
                                            ng-if="!mcl.getVisibility(layer.id)" class="btn btn-default"
                                            style="padding: 0;border-color: white;"
                                            aria-label="Left Align"><i
                                            class="fa fa-eye-slash fa-lg"></i></button>
                                </div>
                                <div class="item_catalog">
                                    <div class="layer-title-wrapper">
                                        <div tooltip-placement="bottom" uib-tooltip="Show/Hide details" class="glyphicon glyphicon-chevron-down" style="float: left; width: 0;padding-left: 0; padding-top: 20px" ng-click="mcl.toggleLayerControls(layer.id, $event)"></div>
                                        <div class="item_title" style="float: left;width:206px;padding-left: 20px;" ng-click="mcl.zoomToLayer(layer.id)" ng-bind="layer.title"></div>
                                        <div tooltip-placement="bottom" uib-tooltip="Remove layer" class="glyphicon glyphicon-remove" ng-click="mcl.removeLayer(layer.id, $index, layer.django_id)"></div>
                                        <div style="clear:both;"></div>
                                    </div>
                                    <div class="layer-control-wrapper" ng-class="layer.id" style="display: none;margin-left:-14px;width:260px;border-top:1px solid #ddd; padding: 5px 10px;">
                                        <div class="item_desc">
                                            <slider class="slider" ng-model="mcl.sliderValues[layer.id]" min="0" max="100" step="1" on-slide="mcl.changeOpacity(layer.id)" on-stop-slide="mcl.changeOpacity(layer.id)" style="width:95%;"></slider>
                                            <div ng-if="layer.ogc_times">Specify date: <select ng-model="mcl.selectedLayerDates[layer.id]" ng-change="mcl.updateLayer(layer.id)" ng-options="o as o for o in layer.ogc_times"></select></div>
                                            <div ng-if="layer.layers">Specify layer: <select ng-model="mcl.selectedLayerNames[layer.id]" ng-change="mcl.updateLayerName(layer.id)" ng-options="o as o for o in layer.layers"></select></div>
                                        </div>
                                        <div class="item_icon" ng-if="layer.source != 'sentinelhub'">
                                            <button tooltip-placement="bottom" uib-tooltip="Show/Hide legend" type="button" ng-if="layer.legend_url || layer.legend_graphic || layer.legend_colors" ng-click="mcl.toggleLegend(layer)"  class="btn btn-default" aria-label="Left Align"><i class="fa fa-list fa-lg"></i></button>
<!--                                            <button tooltip-placement="bottom" uib-tooltip="Download data" ng-if="layer.downloadable" type="button" ng-click="mcl.download(layer)" class="btn btn-default" aria-label="Left Align"><i class="fa fa-download fa-lg"></i></button>-->
                                            <button tooltip-placement="bottom" uib-tooltip="Show metadata" type="button" ng-click="mcl.showMetadata(layer)" class="btn btn-default" aria-label="Left Align"><i class="fa fa-file-text-o fa-lg"></i></button>
                                            <button tooltip-placement="bottom" uib-tooltip="Show/Hide station list" type="button" ng-if="layer.ogc_type == 'SOS'" ng-click="mcl.toggleStations(layer)" class="btn btn-default" aria-label="Left Align"><i class="fa fa-list-ol fa-lg"></i></button>
                                            <button tooltip-placement="bottom" uib-tooltip="Zoom to layer" type="button" ng-click="mcl.zoomToLayer(layer.id)" class="btn btn-default" aria-label="Left Align"><i class="fa fa-search fa-lg"></i></button>
                                           <!-- <button tooltip-placement="bottom" uib-tooltip="Remove layer" type="button" ng-click="mcl.removeLayer(layer.id, $index, layer.django_id)" class="btn btn-default" aria-label="Left Align"><i class="fa fa-times fa-lg"></i></button>-->
                                        </div>
                                    </div>
                                </div>
                                <div class="layer-control-wrapper" ng-class="layer.id" style="display: none;">
                                    <div class="item_stations" ng-if="layer.ogc_type == 'SOS'" ng-hide="!layer.showStations">
                                        <strong>Available stations:</strong>
                                        <ul style="padding-left:20px;">
                                            <li ng-repeat="station in layer.stations"><a href="#" ng-click="mcl.zoomToStation(station);">{{ station.name }}
                                                ({{ station.lat.toFixed(2) }} {{ station.lon.toFixed(2) }})</a></li>
                                        </ul>
                                    </div>
                                    <div class="item_legend" style="margin-left:40px;margin-top:5px;" ng-if="layer.legend_url || layer.legend_graphic || layer.legend_colors" ng-hide="!layer.showLegend">
                                        <img ng-if="!layer.legend_colors && layer.legend_url" href="{{ layer.legend_url }}.jpg" ng-src="{{ layer.legend_url }}" alt="Layer legend" style="max-width:100%"/>
                                        <img ng-if="!layer.legend_colors && layer.legend_graphic && !layer.legend_url" ng-src="{{ layer.legend_graphic }}" alt="Layer legend" style="max-width:100%"/>
                                        <table ng-if="layer.legend_colors" style="border-collapse: separate; border-spacing: 0px 2px;">
                                            <tr ng-repeat="item in layer.legend_colors track by $index">
                                                <td ng-if="item['stroke-color'] != item.color && item['stroke-color']" class="legend-color legend-border-color"  ng-attr-style="background-color:{{ item.color }}; border-color: {{ item['stroke-color'] }};">&nbsp;</td>
                                                <td ng-if="item['stroke-color'] == item.color || !item['stroke-color']" class="legend-color"  ng-attr-style="background-color:{{ item.color }};">&nbsp;</td>
                                                <td class="legend-label">{{ item.label }}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- END List GROUP -->
                </div>
                <div id="active_layer" class="toggle-button-wrapper" ng-class="mcl.wetlandListState">
                    <button id="show_active_layer" class="glyphicon" ng-if="mcl.showToggleButton" ng-click="mcl.toggleWetlandList('click')"></button>
                </div>
            </div>

            <div class="col-md-3 sidebar first" id="sidebar" ng-controller="RegionsCtrl as regions">
                <!-- Tab panes -->

                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane" ng-class="{active: regions.data.activeTab==-1}" id="regions">
                        <div  ng-if="!regions.value['id']">
                            <div ng-if="regions.regions_without_geom.length==0">Loading regions... please wait </div>
                            <div ng-repeat="layer in regions.regions_without_geom" class="list-group-item clearfix" ng-click="regions.selectRegion(layer)" title="{{layer.name}}">
                                <div class="catalog-item">
                                    <div class="item_center">
                                        <div class="item_title">{{layer.name}}</div>
                                    </div>
                                    <div class="item_right">
                                        <button type="button" class="btn btn-default btn-xs button_catalog_meta" aria-label="Left Align" >
                                            <i class="fa fa-file-text-o fa-lg "></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="geospatial_data" ng-if="regions.value['id']" ng-class="{noImage: regions.value.data.image == null}" id="region_{{regions.value.id}}">
                            <div id="closeWetland" ng-click="regions.closeRegion()" style="float:right;color:white;cursor: pointer;margin-right: 5px;margin-top: 3px;display:none;">&#10060;</div>
                            <h2>{{regions.value.name}}</h2>
                            <div ng-if="regions.value.data.image!=null" class="wetland-image">
                                <a href="{{regions.value.data.image}}" class="fancybox" rel="wetland_{{regions.value.id}}" title="{{regions.value.data.image_desc}}">
                                    <img ng-src="{{regions.value.data.image}}" width="100%"/>
                                </a>
                                <div class="panoramio-wapi-tos wetland_image">
                                    <div class="desc">{{regions.value.data.image_desc}}</div>
                                </div>
                            </div>
                            <div ng-controller="StoryLineCtrl as storyline">
                            <div ng-controller="TrackingCtrl as tracking">
                                <uib-tabset justified="true">
                                    <!-- Overview -->
                                    <uib-tab class="flaticon-bars" heading="" select="tracking.trackWetlandTab('overview')">

                                        <div>

                                             <uib-accordion close-others="false">
                                                <div uib-accordion-group heading="Verfügbare Daten" is-open="regions.overview">
                                                    <uib-accordion-heading>
                                                        Verfügbare Daten
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.overview, 'glyphicon-chevron-right': !regions.overview}"></i>
                                                    </uib-accordion-heading>
                                                    <div class="buttons overview" style="text-align: center;margin-top: 10px;">
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon-layers a').click()">
                                                            <div class="flaticon-layers"></div>{{regions.dataCount.externaldb}} Allgemeine Karten</button>
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon2-climate a').click()">
                                                            <div class="flaticon2-climate"></div>{{regions.dataCount.indicators}} Klimakarten</button>
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon2-calendar a').click()">
                                                            <div class="flaticon2-calendar"></div>{{regions.dataCount.products}} Ph&auml;nologiekarten</button>
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon-space-satellite-station a').click()">
                                                            <div class="flaticon-space-satellite-station"></div>{{regions.dataCount.satdata}} Satellitendaten</button>
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon-technology-2 a').click()">
                                                            <div class="flaticon-technology-2"></div>{{regions.dataCount.images}} In-Situ Daten</button>
                                                        <button type="button" class="btn btn-wetland" onclick="$('li.flaticon2-group a').click()">
                                                            <div class="flaticon2-group"></div>{{regions.dataCount.videos}} Citizen Science</button>
                                                        
                                                    </div>
                                               </div>
                                               
                                               <style type="text/css">
                                                   div.text p {
                                                        text-align:justify;
                                                   }
                                               </style>
                                            
                                                
                                                <div class="text" uib-accordion-group heading="Thematische Einführung" is-open="regions.introduction">
                                                    <uib-accordion-heading>
                                                        Thematische Einführung
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.introduction, 'glyphicon-chevron-right': !regions.introduction}"></i>
                                                    </uib-accordion-heading>
                                                    
                                                    <p>Pflanzen ändern Ihr Aussehen im Jahresverlauf: Sie blühen im Frühling, produzieren Blätter und Früchte im Jahresverlauf und verfärben sich im Herbst. Dennoch gibt es Unterschiede: Ackerpflanzen sind nur eine begrenzte Zeit im Jahr vorhanden, Laubbäume haben nicht immer Blätter und Nadelbäume sind auch im Winter grün.</p>
                                                    <p>Diese Unterteilung ist sogar aus dem Weltall zu erkennen; sie kann helfen, Änderungen dieser Vegetationsbereiche z. B. durch den Klimawandel zu erkennen.</p>
                                                    <h4>Einfluss des Klimawandels</h4>
                                                    <p>Die Auswirkungen des Klimawandels  in Thüringen sind bereits heute direkt spürbar: Durch eine gestiegene Durchschnittstemperatur (+1,3°C 1986-2015 im Vergleich zu 1881-1910) kommt es immer häufiger zu Trockenereignissen, die vor allem die Landwirtschaft treffen.</p>
                                                    <p>Eine weitere direkt messbare Folge des Klimawandels ist die Verschiebung der Vegetationsperiode von Pflanzen in den Winter – sie blühen früher und länger im Jahr. Messbar sind sie mit zehn sog. phänologische Phasen, die in einer phänologischen Uhr abgebildet werden.</p>
                                                    <p>Die Sal-Weide, als Indikator für den Vorfrühling, blüht heute bis zu 15 Tage früher als noch vor 50 Jahren – und der Trend hält an. Änderungen über die letzten Jahrzehnte sind anhand von kontinuierlichen Beobachtungsdaten freiwilliger Beobachter in Diensten des Deutschen Wetterdienstes (DWD) sehr gut belegbar.</p>
                                                    <h4>Klimafolgenindikatoren</h4>
                                                    <p>Die Verschiebung der phänologischen Phasen wird als „Klimafolgenindikator“ bezeichnet, dessen Änderungen auch über einzelne Dekaden (10 Jahre) aufgeschlüsselt werden kann. Anhand der Änderungen, können Rückschlüsse auf potentielle Folgen für Mensch und Umwelt gezogen werden.</p>
                                                    <h4>Klimafolgenmonitoring</h4>
                                                    <p>Potentielle Folgen für Mensch und Umwelt, durch Änderungen in der Phänologie, können sein:</p>
                                                    <ul>
                                                        <li>Zunehmende gesundheitliche Beeinträchtigungen von Allergikern durch früheren und verstärkten Pollenflug</li>
                                                        <li>Zunahme von Ernteausfällen bei Kulturpflanzen in der Landwirtschaft (da die Gefahr von Spätfrösten und Trockenperioden steigt)</li>
                                                        <li>Verstärkung von Wassermangelerscheinungen, da die Vegetation länger im Jahr aktiv ist und weniger Niederschläge im Sommer zu erwarten sind – Wasser, das an anderer Stelle fehlen wird.</li>
                                                    </ul>
                                                    <p>Um auf diese Folgen mit passenden Strategien zu reagieren, wird vom Freistaat Thüringen ein „Klimafolgenmonitoring“ eingerichtet. Es ist Bestandteil des Integrierten Maßnahmenprogramms zur Anpassung an die Folgen des Klimawandels im Freistaat Thüringen – IMPAKT.</p>
                                                    <p>Mit „PhaenOPT“ soll ein erster, zuverlässiger webbasierter Monitoring-Dienst eingerichtet werden, der Aussagen zu zeitlichen Änderungen phänologischer Phasen treffen kann. Die Informationen sollen frei abrufbar sein.</p>
                                                </div>
                                                
                                                <div uib-accordion-group heading="Weitere Informationen" is-open="regions.weiteres">
                                                    <uib-accordion-heading>
                                                        Weitere Informationen
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.weiteres, 'glyphicon-chevron-right': !regions.weiteres}"></i>
                                                    </uib-accordion-heading>
                                                    
                                                    <ul style="padding-left: 20px;">
                                                        <li><a href="http://www.spektrum.de/lexikon/geographie/fernerkundung/2424" target="_blank">Was ist Fernerkundung?</a></li>
                                                        <li><a href="http://www.dwd.de/DE/klimaumwelt/klimaueberwachung/phaenologie/phaenologie_node.html;jsessionid=4552EAA9345D56A45C3F92848E531DCC.live11051" target="_blank">Was ist Phänologie?</a></li>
                                                        <li><a href="/th8/klimaagentur/impakt/index.aspx" target="_blank">IMPAKT (2013)</a></li>
                                                        <li><a href="http://www.d-copernicus.de/" target="_blank">Copernicus Deutschland</a></li>
                                                        <li><a href="http://www.d-copernicus.de/weltraumkomponente" target="_blank">Informationen zu den europäischen Sentinel-Satelliten</a></li>
                                                        <li><a href="https://www.dwd.de/DE/leistungen/phaeno_akt/phaenoakt.html" target="_blank">Aktuelle Vegetationsphase Thüringen (DWD)</a></li>
                                                        <li><a href="http://myseasons.eu/" target="_blank">App „MySeasons“ (engl.)</a></li>
                                                    </ul>
                                                </div>
                                            </uib-accordion>
                                        </div>
                                    </uib-tab>
                                    
                                    <!-- Allgemeine Karten -->
                                    <uib-tab class="flaticon-layers" heading="" uib-tooltip="Allgemeine Karten" tooltip-append-to-body="true" select="tracking.trackWetlandTab('backgroundmaps')">

                                        <div>
                                            <uib-accordion close-others="false">
                                                <div uib-accordion-group heading="Allgemeine Karten" is-open="regions.maps"  ng-if="regions.value.data.layers.allgemein.length > 0">
                                                    <uib-accordion-heading>
                                                        Allgemeine Karten
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.maps, 'glyphicon-chevron-right': !regions.maps}"></i>
                                                    </uib-accordion-heading>
                                                    
                                                    <div ng-repeat="layer in regions.value.data.layers.allgemein" id="layer_vis_div_{{layer.id}}">
                                                        <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                        <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                        <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                        <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                    </div>
                                                </div>
                                                
                                                <div uib-accordion-group heading="Geoproxy Thüringen" is-open="regions.geoproxy"  ng-if="regions.value.data.layers.geoproxy.length > 0">
                                                    <uib-accordion-heading>
                                                        Geoproxy Thüringen
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.geoproxy, 'glyphicon-chevron-right': !regions.geoproxy}"></i>
                                                    </uib-accordion-heading>
                                                    
                                                    <div ng-repeat="layer in regions.value.data.layers.geoproxy" id="layer_vis_div_{{layer.id}}">
                                                        <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                        <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                        <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                        <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                    </div>
                                                </div>
                                            
                                                
                                                <div uib-accordion-group heading="Satellitendaten" is-open="regions.satdata"  ng-if="regions.value.data.satdatalayers.length > 0">
                                                    <uib-accordion-heading>
                                                        Satellitendaten
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.satdata, 'glyphicon-chevron-right': !regions.satdata}"></i>
                                                    </uib-accordion-heading>
                                                    
                                                    <div ng-repeat="layer in regions.value.data.satdatalayers" id="layer_vis_div_{{layer.id}}">
                                                        <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                        <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                        <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                        <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                    </div>
                                                </div>
                                            </uib-accordion>
                                        </div>

                                    </uib-tab>

                                    <!-- Indicators -->
                                    <uib-tab class="flaticon2-climate" heading="" uib-tooltip="Klimakarten" tooltip-append-to-body="true" select="tracking.trackWetlandTab('indicator')">
                                        <div ng-if="regions.value.data.climatelayers.length == 0">No indicators available!</div>
                                        <div ng-if="regions.value.data.climatelayers.length > 0">

                                            <uib-accordion close-others="false">
                                                <div uib-accordion-group ng-repeat="product in regions.value.data.climatelayers" heading="{{product.name}}" is-open="product.open">
                                                    <uib-accordion-heading ng-click="tracking.trackProduct(product.name, product.open);" >
                                                        {{product.name}}
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': product.open, 'glyphicon-chevron-right': !product.open}"></i>
                                                    </uib-accordion-heading>

                                                    <div class="options">
                                                        <p ng-text-truncate='product.description' ng-tt-chars-threshold="200"></p>
                                                        <div class="products_datasets">

                                                            <strong>Karten:</strong>
                                                            <div class="select" ng-if="product.layers.length > 0">
                                                                <div ng-repeat="layer in product.layers" id="layer_vis_div_{{layer.id}}">
                                                                    <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                                    <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                                    <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                                    <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                                </div>
                                                            </div>
                                                            <div class="select"
                                                                 ng-if="product.layers.length == 0">
                                                                No datasets available.
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </uib-accordion>
                                        </div>
                                    </uib-tab>

                                    <!-- Phenolayers -->
                                    <uib-tab class="flaticon2-calendar"  heading="" uib-tooltip="Ph&auml;nologiekarten" tooltip-append-to-body="true"  select="tracking.trackWetlandTab('product')" id="product">
                                        <div ng-if="regions.value.data.phenolayers.length == 0">No phenolayers available!</div>
                                        <div>
                                        <ul class="items products">

                                            <uib-accordion close-others="false">
                                                <div uib-accordion-group ng-repeat="product in regions.value.data.phenolayers | orderBy:'+name'"  heading="{{product.name}}" is-open="product.open">
                                                    <uib-accordion-heading ng-click="tracking.trackProduct(product.name, product.open);">
                                                        <img ng-if="product.image" ng-src="{{ product.image }}" align="" class="phenoimage" style="width: 20px;border-radius:50%;margin-right: 5px;margin-top: -3px;">{{product.name}}
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': product.open, 'glyphicon-chevron-right': !product.open}"></i>
                                                    </uib-accordion-heading>
                                                    <div class="options">
                                                        <img ng-if="product.image" ng-src="{{ product.image }}" align="right" class="phenoimage" style="width:100px;border-radius:50%;" />
                                                        <p ng-text-truncate='product.description' ng-tt-chars-threshold="200" ng-tt-more-label="Mehr" ng-tt-less-label="Weniger"></p>
                                                        <div class="products_datasets" style="margin-top:10px;clear:both;" ng-if="product.layers.insitu.length > 0">
                                                            <strong>In-situ-Karten:</strong>
                                                            <div class="select">
                                                                <div ng-repeat="layer in product.layers.insitu" id="layer_vis_div_{{layer.id}}">
                                                                    <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                                    <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                                    <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                                    <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="products_datasets" style="margin-top:10px;clear:both;" ng-if="product.layers.modelliert.length > 0">
                                                            <strong>Modellierte Karten:</strong>
                                                            <div class="select">
                                                                <div ng-repeat="layer in product.layers.modelliert" id="layer_vis_div_{{layer.id}}">
                                                                    <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                                    <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                                    <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                                    <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="products_datasets" style="margin-top:10px;clear:both;" ng-if="product.layers.differenz.length > 0">
                                                            <strong>Differenz-Karten:</strong>
                                                            <div class="select">
                                                                <div ng-repeat="layer in product.layers.differenz" id="layer_vis_div_{{layer.id}}">
                                                                    <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                                    <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                                    <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                                    <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </uib-accordion>
                                        </ul>
                                        </div>
                                    </uib-tab>

                                    <!-- Satellitendaten -->
                                    <uib-tab class="flaticon-space-satellite-station" heading="" uib-tooltip="Satellitendaten" tooltip-append-to-body="true"  select="tracking.trackWetlandTab('satdata')">
                                        <uib-accordion close-others="false">

                                            <div uib-accordion-group is-open="regions.satdata_vegetation">
                                                <uib-accordion-heading>
                                                    Satelliten-Vegetationsdaten
                                                    <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.satdata_vegetation, 'glyphicon-chevron-right': !regions.satdata_vegetation}"></i>
                                                </uib-accordion-heading>

                                                <div class="select" ng-if="regions.value.data.satdataproducts.length > 0">
                                                    <div ng-repeat="layer in regions.value.data.satdataproducts" id="layer_vis_div_{{layer.id}}">
                                                        <input ng-if="regions.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" />
                                                        <input ng-if="regions.layerIdMap[layer.id]" type="checkbox" ng-click="regions.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked" />
                                                        <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                        <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[layer.id]]" layer-hash="{{ regions.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                    </div>
                                                </div>

                                            </div>
                                            
                                            <div uib-accordion-group is-open="regions.vegindex" style="text-align:justify">
                                                <uib-accordion-heading>
                                                    Vegetationsindex
                                                    <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.vegindex, 'glyphicon-chevron-right': !regions.vegindex}"></i>
                                                </uib-accordion-heading>
                                                
                                                <p>Informationen über die Vegetation lassen sich über spektrale Kanäle optischer Satelliten ableiten. "Gesunde" Vegetation absorbiert sehr viel Licht aus dem roten Spektralbereich und reflektiert sehr viel Strahlung im nahen Infrarot-Bereich. Die Reflexion im nahen Infrarot ist auf das Vorhandensein von Chlorophyll zurückzuführen.</p>
                                                <p>Die folgende Abbildung zeigt den Reflexionsgrad von unterschiedlicher Landbedeckung in Abhängigkeit mit dem Wellenbereich. Je vitaler (grüner) die Pflanze, desto größer ist der Anstieg des Reflexionsgrades in diesem Spektralbereich.</p>
                                                <p><a href="/media/spektralbereich.png" class="fancybox"><img src="/media/spektralbereich.png" width="100%"/></a></p>
                                                <p>Die folgenden Vegetationsindizes haben sich in der Forschung bewährt:</p>
                                                <p><strong>Normalized Difference Vegetation Index (NDVI)</strong></p>
                                                <p><img src="/media/ndvi_formel.png" width="200"/></p>
                                                <p><strong>Enhanced Vegetation Index (EVI)</strong></p>
                                                <p><img src="/media/evi_formel.png" width="200"/></p>
                                                <p>Während NDVI-Werte aus Satellitendaten von der Aufnahmeuhrzeit und damit vom Sonneneinfallswinkel abhängen, entstehen je nach Aufnahmezeitpunkt an einem Tag unterschiedliche Informationen zum Vegetationsstatus. Der EVI berücksichtigt dies und korrigiert den Unterschied zwischen den atmosphärischen Bedingungen und dem Einfallswinkel der Sonne.</p>
                                            </div>
                                            
                                            <div uib-accordion-group is-open="regions.phenology" style="text-align:justify">
                                                <uib-accordion-heading>
                                                    Ph&auml;nologische Modellierung
                                                    <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.phenology, 'glyphicon-chevron-right': !regions.phenology}"></i>
                                                </uib-accordion-heading>
                                                
                                                <p>Die phänologische Modellierung basiert auf der Ableitung von Beginn und Ende der Vegetationsperiode innerhalb eines Jahres. Zwischen dem niedrigsten (Basis) und höchsten (Peak) Wert des Satelliten-basierten Vegetationsindex befindet sich der Beginn der Vegetationsperiode. Verschiedene Softwarepakete existieren, mit denen die Ableitung durchgeführt werden können. Wir verwenden die Software <a href="http://web.nateko.lu.se/timesat/timesat.asp?cat=1" target="_blank">TIMESAT</a>.</p>
                                                <p>Die folgende Abbildung zeigt den Verlauf des Vegetationsindex in einem Jahr (blaue Linie), der geglättete Verlauf (rote Linie) sowie die phänologischen Parameter, die abgeleitet werden können. Verschiedene Parameter können eingestellt werden, um den Beginn und das Ende der Vegetationsperiode zu bestimmen. Für die Kalibrierung dieser Parameter verwenden wir die phänologischen Insitu-Daten des DWD.</p>  
                                                <p>
                                                    <a href="http://web.nateko.lu.se/timesat/images/TIMESAT_parameters.png" class="fancybox"><img src="http://web.nateko.lu.se/timesat/images/TIMESAT_parameters.png" width="100%" /></a><br>
                                                    <i>Abbildung: Parameters aus der Software TIMESAT: (a) beginning of season, (b) end of season, (c) length of season, (d) base value, (e) time of middle of season, (f) maximum value, (g) amplitude, (h) small integrated value, (h+i) large integrated value. &copy; Eklundh (2018) under Creative Commons Attribution-NonCommercial-NoDerivs 2.5 Sweden License.</i>
                                                </p>
                                            </div>

                                            <div uib-accordion-group is-open="regions.satdata_image">
                                                <uib-accordion-heading>
                                                    Verfügbare Satellitenszenen* für Thüringen
                                                    <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.satdata_image, 'glyphicon-chevron-right': !regions.satdata_image}"></i>
                                                </uib-accordion-heading>
                                                <p>* Basierend auf Landsat- und Sentinel-Daten!</p>
                                                <a href="javascript:;" uib-tooltip="Click to open the satellite scenes explorer application" ng-click="regions.showSatdataExplorer()"><img ng-src="/media/cache/satdata/satdata_all_{{regions.value.id}}_small.png" width="100%" /></a>
                                                <div class="last_update" style="text-align: right;font-size: 0.85em;">Letzte Aktualisierung: 04.09.2018</div>
                                                
                                                <table class="table data">
                                                    <tr>
                                                        <!--<th>&nbsp;</th>-->
                                                        <th>Sensor</th>
                                                        <th>Szenen</th>
                                                        <th>Start</th>
                                                        <th>Ende</th>
                                                    </tr>
                                                    <tr ng-if="!regions.value.satdata">
                                                        <td colspan="4">Loading...</td>
                                                    </tr>
                                                    <tr ng-repeat="data in regions.value.satdata.table" >
                                                        <!--<td><input type="checkbox" id="layer_data_s2" /><label for="layer_data_s2"></label></td>-->
                                                        <td>{{data.dataset}}</td>
                                                        <td>{{data.count}}</td>
                                                        <td>{{data.min}}</td>
                                                        <td>{{data.max}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                            
                                            <div uib-accordion-group is-open="regions.satdata_layers" ng-if="regions.value.satdata.layers_count > 0">
                                                <uib-accordion-heading>
                                                    Satellitenszenen Visualisierung
                                                    <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': regions.satdata_layers, 'glyphicon-chevron-right': !regions.satdata_layers}"></i>
                                                </uib-accordion-heading>
                                                <div uib-accordion-group ng-repeat="(key, layers) in wetlands.value.satdata.layers" ng-if="layers.length > 0">
                                                    <uib-accordion-heading>
                                                        {{key}}
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': wetlands.satdata_layers, 'glyphicon-chevron-right': !wetlands.satdata_layers}"></i>
                                                    </uib-accordion-heading>
                                                    <div ng-repeat="layer in layers | orderObjectBy:'id'"
                                                         ng-controller="MapCurrentLayersCtrl as mcl" id="layer_vis_div_{{layer.id}}">
                                                        <input ng-if="wetlands.layerIdMap[layer.id] === undefined" type="checkbox" ng-click="wetlands.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}"/>
                                                        <input ng-if="wetlands.layerIdMap[layer.id]" type="checkbox" ng-click="wetlands.addLayerToMap(layer, $event);" id="layer_vis_{{layer.id}}" checked="checked"/>
                                                        <label for="layer_vis_{{layer.id}}"> {{layer.alternate_title}}</label>
                                                        <swos-layer-controls class="swosLayerControls" ng-if="wetlands.layers[wetlands.layerIdMap[layer.id]]" layer-hash="{{ wetlands.layerIdMap[layer.id] }}"></swos-layer-controls>
                                                    </div>
                                                </div>
                                                <div style="margin-top:10px;margin-left:2px;">Made available based on <a href="https://sentinel-hub.com/" target="_blank">Sentinel Hub Services</a> and the ESA Open Science Earth Observation grant (No. <a href="https://earth.esa.int/web/guest/pi-community/search-results-and-projects/keyword-entry?IFRAME_SRC=%2Fpi%2Fesa%3Fts%3D1528463214378%26targetIFramePage%3D%252Fweb%252Fguest%252Fpi-community%252Fsearch-results-and-projects%252Fkeyword-entry%26topSelectedNavigationNodeId%3DSEARCH%26coordinates%3D%26sideNavigationType%3DSEARCH%26type%3D10%26toprint%3D-1%26token%3D%26addattribute%3Dfalse%26sideExpandedNavigationBoxId%3DprojectSearch%26id%3D36615%26caller%3D%25252Fpi%25252Fesa%25253Finstitute%25253D%252526itemsPerPage%25253D10%252526sideExpandedNavigationBoxId%25253DprojectSearch%252526displayMode%25253Dcenter%252526cmd%25253Dother%252526submissionid%25253D-1%252526showAll%25253Dtrue%252526topSelectedNavigationNodeId%25253DSEARCH%252526keyword%25253D%252526downloadAsCsv%25253Dfalse%252526targetIFramePage%25253D%2525252Fweb%2525252Fguest%2525252Fpi-community%2525252Fsearch-results-and-projects%2525252Fkeyword-entry%252526ts%25253D1528463214378%252526colorTheme%25253D03%252526startFrom%25253D0%252526sideNavigationType%25253DSEARCH%252526title%25253D%252526aoid%25253D1560%26cmd%3Dproject%26header%3D%26displayMode%3Dcenter%26colorTheme%3D03%26subnavigation%3D1%26role%3D0" target="_blank">36615</a>).</div>
                                                <div class="last_update" style="text-align: right;font-size: 0.85em;margin-top: 10px;margin-right: 5px;">Last update: 2018-09-04</div>
                                            </div>
                                        </uib-accordion>
                                    </uib-tab>

                                    <!-- In-Situ-Daten -->
                                    <uib-tab class="flaticon-technology-2" heading="" uib-tooltip="In-Situ Daten" tooltip-append-to-body="true"  select="tracking.trackWetlandTab('in-situ')">
                                        <div ng-controller="InSituCtrl as insitu">
                                            <uib-accordion close-others="false">
                                                <div uib-accordion-group is-open="insitu.stationOpen">
                                                    <uib-accordion-heading>Phänologische Stationen des DWD
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': insitu.stationOpen, 'glyphicon-chevron-right': !insitu.stationOpen}"></i>
                                                    </uib-accordion-heading>
                                                    <div>
                                                        <strong>Stationen in der Karte anzeigen:</strong>
                                                        <div id="layer_vis_div_{{insitu.stations_layer.id}}">
                                                            <input ng-if="regions.layerIdMap[insitu.stations_layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(insitu.stations_layer, $event);" id="layer_vis_{{insitu.stations_layer.id}}" />
                                                            <input ng-if="regions.layerIdMap[insitu.stations_layer.id]" type="checkbox" ng-click="regions.addLayerToMap(insitu.stations_layer, $event);" id="layer_vis_{{insitu.stations_layer.id}}" checked="checked" />
                                                            <label for="layer_vis_{{insitu.stations_layer.id}}"> {{insitu.stations_layer.alternate_title}}</label>
                                                            <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[insitu.stations_layer.id]]" layer-hash="{{ regions.layerIdMap[insitu.stations_layer.id] }}"></swos-layer-controls>
                                                        </div>

                                                        <div style="margin-top:10px;">
															<strong>Stationsdaten anzeigen:</strong><br/>
	                                                        <select id="stations-selection" class="selectpicker" data-live-search="true" data-live-search-style="startsWith" ng-model="insitu.selectedStation">
	                                                          <option ng-repeat="station in insitu.stationen" value="{{ station }}">{{station.Stationsname}}</option>
	                                                        </select>
														</div>
                                                        <div ng-if="insitu.stationDataLoaded" style="margin-top:10px;">
                                                            <p>
                                                                <strong>Stations-ID: </strong>{{ insitu.selectedStationData['Stations_id'] }}<br/>
																<strong>Lage: </strong>{{ insitu.selectedStationData['geograph_Breite'] }} {{ insitu.selectedStationData['geograph_Laenge'] }}<br/>
                                                                <strong>Höhe: </strong>{{ insitu.selectedStationData['Stationshoehe'] }} Meter<br/>
																<strong>Naturraum: </strong>{{ insitu.selectedStationData['Naturraum'] }}
                                                                <span ng-if="insitu.selectedStationData['Stationsaufloesung']"><br/><strong>Stationsaufl&ouml;sung: </strong>{{ insitu.selectedStationData['Stationsaufloesung'] }}</span>
                                                            </p>
                                                            <div ng-if="insitu.selectedStationData['phases'].length > 0" style="margin-top:10px;">
                                                                <strong>Verfügbare Daten:</strong>
                                                                <select id="phases-selection" class="selectpicker" data-live-search="true" data-live-search-style="startsWith" ng-model="insitu.selectedPhase">
                                                                  <option ng-repeat="phase in insitu.selectedStationData['phases']" value="{{ phase }}">{{ phase.name }}</option>
                                                                </select>
                                                                <a href="{{ insitu.selectedPhaseImage }}" class="fancybox" target="_blank"><img ng-if="insitu.selectedPhaseLoaded" ng-src="{{ insitu.selectedPhaseImage }}" width="100%" /></a>
                                                            </div>
                                                            <div ng-if="insitu.selectedStationData['phases'].length == 0">
                                                                Es wurden noch keine Daten in unser System integriert!
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div uib-accordion-group is-open="insitu.PhasenOpen">
                                                    <uib-accordion-heading>Eintrittstermine der Pflanzenphasen in Thüringen
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': insitu.PhasenOpen, 'glyphicon-chevron-right': !insitu.PhasenOpen}"></i>
                                                    </uib-accordion-heading>
                                                    <div>
                                                        <select id="definitions-selection" class="selectpicker" data-live-search="true" data-live-search-style="startsWith" ng-model="insitu.selectedDefinition">
                                                          <option ng-repeat="phase in insitu.definitions" value="{{ phase }}">{{phase.name}}</option>
                                                        </select>
                                                        <div ng-if="insitu.selectedDefinition" style="margin-top:10px;">
                                                             <p>
                                                                <strong>Objekt-ID: </strong>{{ insitu.selectedDefinitionData['Objekt_id'] }}<br/>
                                                                <strong>Phasen-ID: </strong>{{ insitu.selectedDefinitionData['Phasen_id'] }}
                                                                 <span ng-if="insitu.selectedDefinitionData['BBCH_Code']"><br/><strong>BBCH-Code: </strong>{{ insitu.selectedDefinitionData['BBCH_Code'] }}</span><br/>
                                                                <strong>Definition: </strong>{{ insitu.selectedDefinitionData['Phasendefinition'] }}<br/>
                                                                 <strong>Verfügbare Stationen in Thüringen mit Daten: </strong>{{ insitu.selectedDefinitionData['stationsCount'] }}
                                                            </p>
                                                            <hr/>
                                                            <h4>Verteilung des Eintrittsdatums</h4>
                                                            <p ng-if="insitu.selectedDefinitionLoaded">
                                                                Von&nbsp;<select ng-model="insitu.yearStart">
                                                                    <option ng-repeat="year in insitu.years">{{ year }}</option>
                                                                </select>
                                                                &nbsp;bis&nbsp;<select ng-model="insitu.yearEnd">
                                                                    <option ng-repeat="year in insitu.years">{{ year }}</option>
                                                                </select>
                                                                &nbsp;&nbsp;
                                                                <button class="btn btn-primary" style="padding: 1px 12px;font-size: 13px;cursor:pointer;" ng-click="insitu.updateDefinitionsHistogram()">Grafik aktualisieren</button>
                                                                <a href="{{ insitu.selectedDefinitionImage }}" class="fancybox" target="_blank"><img ng-src="{{ insitu.selectedDefinitionImage }}" width="100%" /></a>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </uib-accordion>
                                        </div>
                                    </uib-tab>

                                    <!-- Citizen Science -->
                                    <uib-tab class="flaticon2-group" heading="" uib-tooltip="Citizen Science" tooltip-append-to-body="true"  select="tracking.trackWetlandTab('citizenscience')">
                                        <div ng-controller="CitizenScienceCtrl as citizenscience" id="citizenscience">
                                            <uib-accordion close-others="false">
                                                <div uib-accordion-group ng-repeat="project in regions.value.data.citizenscience"  is-open="project.open">
                                                    <uib-accordion-heading>{{ project.name }}
                                                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': project.open, 'glyphicon-chevron-right': !project.open}"></i>
                                                    </uib-accordion-heading>
                                                    <div>
                                                        <p ng-text-truncate='project.description' ng-tt-chars-threshold="200"></p>
                                                        <p ng-if="project.online_link"><a href="{{ project.online_link }}" target="_blank">{{ project.online_link }}</a></p>
                                                        <div ng-if="project.id === 1">
                                                            <div id="layer_vis_div_{{citizenscience.myseasons_layer.id}}">
                                                                <input ng-if="regions.layerIdMap[citizenscience.myseasons_layer.id] === undefined" type="checkbox" ng-click="regions.addLayerToMap(citizenscience.myseasons_layer, $event);" id="layer_vis_{{citizenscience.myseasons_layer.id}}" />
                                                                <input ng-if="regions.layerIdMap[citizenscience.myseasons_layer.id]" type="checkbox" ng-click="regions.addLayerToMap(citizenscience.myseasons_layer, $event);" id="layer_vis_{{citizenscience.myseasons_layer.id}}" checked="checked" />
                                                                <label for="layer_vis_{{citizenscience.myseasons_layer.id}}"> {{citizenscience.myseasons_layer.alternate_title}}</label>
                                                                <swos-layer-controls class="swosLayerControls" ng-if="regions.layers[regions.layerIdMap[citizenscience.myseasons_layer.id]]" layer-hash="{{ regions.layerIdMap[citizenscience.myseasons_layer.id] }}"></swos-layer-controls>
                                                            </div>
                                                            <div ng-if="regions.layers[regions.layerIdMap[citizenscience.myseasons_layer.id]]">
                                                                <table class="table table-striped table-hover" style="margin-top:10px;">
                                                                    <tr>
                                                                        <th width="110">Datum</th>
                                                                        <th>Baum</th>
                                                                        <th>Phase</th>
                                                                        <th></th>
                                                                    </tr>
                                                                    <tr ng-repeat="feature in citizenscience.getFeatures(regions.layers[regions.layerIdMap[citizenscience.myseasons_layer.id]].getSource().getFeatures()).slice(((citizenscience.currentPage-1)*citizenscience.itemsPerPage), ((citizenscience.currentPage)*citizenscience.itemsPerPage))" style="cursor: pointer">
                                                                        <td ng-click="citizenscience.selectObservation(feature)">{{ feature.getProperties().pubdate | date:'dd.MM.yy HH:mm' }}</td>
                                                                        <td ng-click="citizenscience.selectObservation(feature)">{{ feature.getProperties().baum }}</td>
                                                                        <td ng-click="citizenscience.selectObservation(feature)">{{ feature.getProperties().phase }}</td>
                                                                        <td><a href="{{ feature.getProperties().image }}"  class="fancybox" target="_blank" ng-if="feature.getProperties().image"><img src="/static/img/flaticon/png/camera.png"</a></td>
                                                                    </tr>
                                                                </table>
                                                                <ul uib-pager total-items="citizenscience.totalItems" ng-model="citizenscience.currentPage"></ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                    </uib-tab>

                                </uib-tabset>
                            </div>
                                </div>
                        </div>
                    </div>

                </div>

                <div class="right-bottom-logo">
                    <div style="float:left">Portalentwicklung durch<br>Lehrstuhl für Fernerkundung, <br>Friedrich-Schiller-Universität Jena</div>
                    <div style="float:right"><a href="http://www.eo.uni-jena.de" target="_blank"><img src="/media/UniJena_BildWortMarke_blue_50px.png" style="height: 50px;"></a></div>
                </div>
            </div>
            {% endverbatim %}

        </div>
    </div>

    <div style="display:none">
        <div id="popup"></div>
        <div id="stationPopup"></div>
        <div id="storylinePopup"></div>
    </div>

    <div id="info_text" style="display:none;">
        <div class="modal-header">
            <h1>Info</h1>
        </div>
        <div class="modal-body">
            <div class="text window_info">{{html_info|safe|linebreaks}}</div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="mi.close()">
                Close
            </button>
        </div>
    </div>

    <script id="welcome_text" style="display:none">
        <div style="padding:15px;">
            <p>Willkommen auf dem PhaenOPT-Webportal.</p>
            <p>Hier stellen wir Daten und Informationen zu unserem Webdienst für das phänologische Klimafolgenmonitoring bereit.</p>
            <!--<p><a href="/mapviewer/detail/2.html">Hier geht es zum Expertentool</a></p>-->
        </div>
    </script>

    <!-- Geoss Search Widget popup container -->
    <!-- 'geoss' class is needed -->
    <div id="geoss-popup" style="display:none;">
        <div modal-draggable class="modal-header">
            <h1>Metadata</h1>
        </div>
        <div class="modal-body" style="padding: 0;">
            <div class="text popups-container geoss"></div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="mi.close()">
                Close
            </button>
        </div>
    </div>

    {% assets "swosVendorJsBundle" %}
    <script src="{{ ASSET_URL }}" type="text/javascript"></script>
    {% endassets %}

    {% assets "swosAppJsBundle" %}
    <script src="{{ ASSET_URL }}" type="text/javascript"></script>
    {% endassets %}

    <div ng-view></div>

</body>
</html>
